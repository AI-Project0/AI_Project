# Pro-ID Gen: AI 專業證件照生成系統終極報報告

## 1. 專案核心願景
Pro-ID Gen 致力於打破傳統證件照的限制。我們的初衷是：**「讓任何人（不論老人、小孩、男女），即便穿著睡衣在家中隨意拍攝，都能透過 AI 一步到位生成 2K 高清、西裝筆挺的專業證件照。」**

## 2. 核心 AI 技術管線 (The AI Pipeline)
系統採用多階段串接技術，確保生成的每一像素都具備物理正確與高度美感：
*   **影像去背與清理 (Rembg U2Net)**：使用 `rembg` 進行初次摳圖，並配合我們開發的「雙重 Alpha 深度洗淨」技術，強制侵蝕邊緣 4 像素以消除環境溢色（如藍色背光）。
*   **臉部特徵解析 (MediaPipe Face Mesh)**：精準定位 468 個面部座標，用於自動裁切與珠寶偵測。
*   **西裝結構生成 (Stable Diffusion Inpainting)**：
    *   **模型**：`runwayml/stable-diffusion-inpainting` (v1.5 核心)。
    *   **幾何身體代理策略 (Body Proxy)**：捨棄原始衣物結構，改用精準的幾何骨架引導，確保 AI 完美繪製西裝。
    *   **超強算圖強度 (Strength 0.98)**：強制覆蓋睡衣紋理，生成硬挺的職業裝。
*   **高清重建與美化 (HD Enhancement)**：
    *   **GFPGAN v1.3**：專門修復 AI 生成後的面部特徵，找回眼神光。
    *   **Real-ESRGAN x4plus**：四倍超解析度放大，產出 2K/4K 等級影像。

## 3. 使用介面與智慧互動 (UI/UX Details)
### 視覺風格：Japanese Cream Style (日系奶油風)
*   採用暖色調 (Amber/Cream)、大圓角設計與柔和陰影，營造信任感且不專業感。
*   使用 `Inter` 特製字體與精緻的 `Lucide-React` 圖標。

### 智慧防呆與引導機制 (Anti-Fumble)
*   **伺服器喚醒機制 (Server Wake-up Polling)**：針對後端冷啟動 (Cold Start)，實作了即時偵測畫面，避免使用者在伺服器啟動時感到卡頓。
*   **全局鎖定保護**：在生成過程中，介面會呈現半透明毛玻璃效果並禁用所有按鈕，加上「動態百分比環形進度條」，防止使用者重複點擊導致請求衝突。
*   **即時導引標籤**：在尺寸選擇旁貼心標註用途（如「護照」、「台胞證」），降低決策門檻。
*   **互動式裁切**：支援手勢與滾輪縮放，並預置「黃金比例定位線」。

## 4. 專業匯出與配套功能
生成完成後，使用者可透過「精緻換裝模態視窗」進行以下操作：
*   **1x1 高清匯出**：單張 2K 原始數位檔。
*   **4x2 智慧排版 (Print Grid)**：自動生成一張 4x6 吋沖印規格的排版圖（包含 8 張裁切好的證件照）。
*   **ZIP 壓縮打包**：一鍵下載所有背景顏色的版本。

## 5. 工程實踐中的創新細節
*   **珠寶智慧防誤報**：結合「金屬反光點」與「邊緣密度」多因子評分，能精準分辨「遮住耳朵的頭髮」與「實際耳環」，大幅提升使用者體驗。
*   **精密領口銜接 (Neck Join)**：下巴保護區僅預留 2 像素偏差，確保西裝領子與脖子銜接處天衣無縫，消除「斷頭贴紙感」。
*   **30/70 皮膚融合技術**：讓 AI 修復的部分只佔 30%，保留 70% 真實本人皮膚紋理，拒絕「網紅膠感」。

## 6. 使用技術總結表
| 分類 | 使用技術 / 模型 |
| :--- | :--- |
| **前端** | Next.js, TypeScript, Tailwind CSS, Lucide-React |
| **後端** | FastAPI, Uvicorn, Python |
| **AI 模型** | Stable Diffusion (Inpainting), Rembg (U2Net) |
| **臉部座標** | MediaPipe Face Mesh |
| **高清擴音** | Real-ESRGAN, GFPGAN |
| **部署支援** | Render Clean Health Checks, CORS Middleware |

---
**本專案現已完整對接所有模組，是一款真正可以面向市場、高品質且穩定的 AI 影像產品。**
